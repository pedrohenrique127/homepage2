

---

## ğŸ§  ConfiguraÃ§Ã£o de Servidor DNS com BIND9 (Local)

Este guia passo a passo mostra como configurar um servidor DNS local usando **BIND9** em sistemas Linux baseados no **Debian/Ubuntu**.

---

### ğŸ“Œ PrÃ©-requisitos

* Ubuntu ou Debian instalado
* Acesso root ou usuÃ¡rio com `sudo`
* ConexÃ£o com a internet (temporÃ¡ria)
* Editor de texto como `nano`

---

### ğŸ”§ Passo a Passo

---

#### âœ… Passo 1 â€“ Restaurar o arquivo `/etc/hosts`

```bash
sudo nano /etc/hosts
```

Apague alteraÃ§Ãµes incorretas e deixe apenas as linhas padrÃ£o, como:

```text
127.0.0.1       localhost
127.0.1.1       nome-do-host
```

---

#### âœ… Passo 2 â€“ Atualizar repositÃ³rios

```bash
sudo apt-get update
```

---

#### âœ… Passo 3 â€“ Instalar o BIND9

```bash
sudo apt-get install bind9
```

> Pressione `S` para confirmar a instalaÃ§Ã£o.

---

#### âœ… Passo 4 â€“ Verificar se o BIND estÃ¡ rodando

```bash
sudo systemctl status bind9
```

---

#### âœ… Passo 5 â€“ Definir IP fixo na interface de rede

Configure manualmente via interface grÃ¡fica ou terminal:

* **IP**: `192.168.0.10`
* **MÃ¡scara**: `255.255.255.0`
* **Gateway**: `192.168.0.1`
* **DNS**: `192.168.0.10`

Depois aplique e reinicie a rede:

```bash
sudo systemctl restart NetworkManager
ip a
```

---

#### âœ… Passo 6 â€“ Acessar e fazer backup da pasta BIND

```bash
cd /etc/bind
sudo cp named.conf.local named.conf.local.bkp
```

---

#### âœ… Passo 7 â€“ Editar o arquivo `named.conf.local`

```bash
sudo nano named.conf.local
```

ConteÃºdo:

```text
// Zona direta
zone "ifrn.com" {
    type master;
    file "/etc/bind/db.ifrn.com";
};

// Zona reversa
zone "0.168.192.in-addr.arpa" {
    type master;
    file "/etc/bind/db.reverso10";
};
```

---

#### âœ… Passo 8 â€“ Criar arquivos de zona

```bash
sudo cp db.local db.ifrn.com
sudo cp db.127 db.reverso10
```

---

#### âœ… Passo 9 â€“ Editar `db.ifrn.com`

```bash
sudo nano db.ifrn.com
```

ConteÃºdo:

```text
;
; BIND data file for local loopback interface
;
$TTL    604800
@       IN      SOA     ifrn.com. root.ifrn.com. (
                              2         ; Serial
                         604800         ; Refresh
                          86400         ; Retry
                        2419200         ; Expire
                         604800 )       ; Negative Cache TTL
;
@       IN      NS      ifrn.com.
@       IN      A       192.168.0.10
@       IN      AAAA    ::1
```

---

#### âœ… Passo 10 â€“ Editar `db.reverso10`

```bash
sudo nano db.reverso10
```

ConteÃºdo:

```text
;
; BIND reverse data file for local loopback interface
;
$TTL    604800
@       IN      SOA     ifrn.com. root.ifrn.com. (
                              1         ; Serial
                         604800         ; Refresh
                          86400         ; Retry
                        2419200         ; Expire
                         604800 )       ; Negative Cache TTL
;
@       IN      NS      ifrn.com.
10      IN      PTR     ifrn.com.
```

---

#### âœ… Passo 11 â€“ Configurar DNS local no `resolv.conf`

```bash
sudo nano /etc/resolv.conf
```

Adicione:

```text
nameserver 192.168.0.10
```

> Dica: para evitar que o sistema sobrescreva esse arquivo:

```bash
sudo chattr +i /etc/resolv.conf
```

---

#### âœ… Passo 12 â€“ Reiniciar BIND

```bash
sudo systemctl restart bind9
```

---

#### âœ… Passo 13 â€“ Testar resoluÃ§Ã£o DNS

```bash
nslookup ifrn.com
```

---

#### âœ… Passo 14 â€“ Adicionar outros hosts no DNS (opcional)

```bash
sudo nano /etc/bind/db.ifrn.com
```

Exemplo de adiÃ§Ã£o:

```text
www     IN      A       192.168.0.10
portal  IN      A       192.168.0.10
```

---

#### âœ… Passo 15 â€“ Reiniciar Apache e BIND (se necessÃ¡rio)

```bash
sudo systemctl restart apache2
sudo systemctl restart bind9
```

---

### âœ… FinalizaÃ§Ã£o

Agora seu servidor DNS local deve estar funcionando corretamente e resolvendo domÃ­nios como `ifrn.com` para `192.168.0.10`.

---

### ğŸ§ª Dica para Testes

No navegador ou terminal de outra mÃ¡quina na mesma rede:

```bash
ping ifrn.com
```

---

### ğŸ› ï¸ Troubleshooting

* Verifique erros com:

```bash
sudo journalctl -xe
sudo named-checkconf
sudo named-checkzone ifrn.com /etc/bind/db.ifrn.com
```

---





